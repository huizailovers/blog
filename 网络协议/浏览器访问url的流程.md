### 浏览器输入 www.baidu.com 的时候都经过了哪些操作？

### 1.应用层

通过地址簿协议 DNS 去查找到对应的IP，得到 比如106.114.138.24

浏览器打包请求，普通的请求打包成HTTP 协议， 加密的打包成HTTPS协议。

### 2.传输层

传输层有两种协议 TCP,UDP

TCP协议中有两个端口，一个是浏览器监听的端口，一个是百度服务监听的端口。系统通过端口判断将数据包给哪个进程。

### 3.网络层

网络层的协议是IP协议，在ip协议中有源ip地址和目标ip地址。也就是百度服务器的ip地址

操作系统需要区分目标的IP地址是不是本地的IP地址。通过子网掩码安位与上目标IP地址。得到的是不是和子网掩码按位与上本地IP的值相同。如果相同，则在同一个子网络，如果不相同操作系统将IP地址发给网关（例如 192.168.1.1），在同一个子网络中通信通过的是ARP协议。

### 4.MAC 层

网关收到包后，需要判断到某个IP是怎么走的，这个叫做路由表，这种沟通的协议叫做路由协议。找到了目标ip所在的网关后，定位到目标IP所在服务器的MAC地址。取下MAC 头。

上面的流程可以定位到具体的百度所在服务器的MAC 地址

### 下面的流程与上面的流程相反：

取下MAC头，发送给网络层，取下IP头，发送给TCP层。 在TCP 层中，收到包以后会回复一个包 说明收到了。TCP层中有目标端口号，通过这个端口号，找到百度进程正在监听的端口号。

